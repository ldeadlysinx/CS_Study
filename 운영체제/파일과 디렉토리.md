# 파일시스템

보조기억장치는 파티셔닝, 포매팅 하기 전까지는 사용불가

**파티셔닝**
- 저장 장치의 논리적인 영역을 구획하는 작업

**포매팅**
- 파일 시스템을 설정
- 어떤 방식으로 파일을 관리할지 결정, 새로운 데이터를 쓸 준비하는 작업

포매팅까지 완료하여 파일 시스템을 설정했다면 이제 파일과 티렉터리 생성이 가능해진다.


## 파일 할당 방법

 포매팅까지 끝난 하드 디스크에 파일을 저장하기
 - 운영체제는 파일/디렉터리를 블록 단위로 읽고 쓴다.(하나의 파일이 보조기억장치에 저장될 때에는 여러 블록에 걸쳐 저장된다)
 
**연속할당**
 - 이름 그대로 보조기억장치 내 연속적인 블록에 파일 할당
 - 연속된 파일에 접근하기 위해 파일의 첫 번째 블록 주소와 블록 단위의 길이만 알면 된다.

단점)
 - 외부 단편화가 발생할 수 있다.

**불연속할당(연결할당)**
-  각 블록의 일부에 다음 블록의 주소를 저장하여 각 블록이 다음 블록을 가리키는 형태로 할당.
- 파일을 이루는 데이터 블록을 연결 리스트로 관리
- 디렉터리 엔트리: 파일이름 - 첫번째 블록 주소 - 블록 단위의 길이

단점) 
- 반드시 첫 번째 블록부터 하나씩 읽어들여야 한다
- 오류 발생시 그 이후의 블록을 읽을수없다.

**불연속할당(색인 할당)**
- 파일의 모든 블록 주소를 색인 블록이라는 하나의 블록에 모아 관리하는 방식
- 디렉터리 엔트리: 파일이름 - 색인 블록 주소(파일을 구성하는 블록의 주소를 모두 저장)

## 파일 시스템 살펴보기
**FAT 파일 시스템**
- 연결할당 방법의 단점을 보완
- 각 블록에 포함된 다음 블록 주소를 한데 모아 테이블로 관리
- FAT가 메모리에 캐시될 경우 느린 임의 접근 속도 개선 가능

**유닉스 파일 시스템**
- 색인 할당 기반 파일 시스템
- 색인 블록 ==  i-node (파일의 속성 정보와 15개의 블록 주소 저장 가능)

저장방법)
1. 블록 주소 중 12개에는 직접 블록(파일 데이터가 저장된 블록) 주소 저장
2. 1번으로 충분하지 않다면 13번째 주소에 단일 간접 블록 주소 저장
3. 2번으로 충분하지 않다면 14번째 주소에 이중 간접 블록  주소 저장
4. 3번으로 충분하지 않다면 15번째 주소에 삼중 간접 블록 주소 저장
